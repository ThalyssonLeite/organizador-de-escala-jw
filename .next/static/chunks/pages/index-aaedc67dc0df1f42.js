(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(3998)}])},3998:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B},downloadText:function(){return Z}});var n=a(7568),i=a(712),r=a(9815),s=a(414),c=a(5893),o=a(9008),l=a.n(o),d=a(7294),u=a(6042),p=a(4184),m=a.n(p),x=a(4924),f=a(4699),_=a.n(f),g=function(e){var t,a,n=function(t){var a;return null===(a=e.data.title)||void 0===a?void 0:a.toLowerCase().includes(t)},i="treasures"===e.section||void 0===e.section,r="ministry"===e.section,s="cristianLife"===e.section;t=i?"#626262":r?"#c38439":s?"#942926":"#626262";var o=n("c\xe2ntico")&&(i||s),l=n("leitura da b\xedblia")||r&&!n("v\xeddeo"),u=n("estudo b\xedblico de congrega\xe7\xe3o"),p=n(" | ");o?a="Ora\xe7\xe3o:":l?a="Estudante:":u?a="Dirigente/Leitor:":p&&(a="Presidente:");var f=function(e){var t=e.currentTarget.closest("."+_().participant),a=e.currentTarget.innerHTML.length?"add":"remove";e.currentTarget.classList[a](_().isFilled),t.classList[a](_().isFilled)},g=function(e){var t=e.currentTarget.closest("."+_().participant);e.currentTarget.classList.remove(_().isFilled),t.classList.remove(_().isFilled)},h=function(e){var t=e.currentTarget,a=e.currentTarget.innerHTML.length;t.closest("."+_().label).classList[a?"remove":"add"](_().isEmpty)},v=function(e){e.currentTarget.closest("."+_().label).classList.add(_().isEmpty)},b=function(e){var t=e.currentTarget,a=e.currentTarget.innerHTML.length;t.classList[a?"remove":"add"](_().isEmpty)},j=function(e){e.currentTarget.classList.add(_().isEmpty)},k=function(e){var t=e.currentTarget,a=e.currentTarget.innerHTML.length?"remove":"add";t.parentElement.classList[a](_().mb),t.classList[a](_().isEmpty)},y=function(e){var t=e.currentTarget;t.parentElement.classList.add(_().mb),t.classList.add(_().isEmpty)},N=function(t,a){var n=t.currentTarget;setTimeout(function(){e.onWriteData(e.path,e.index,a,"string"==typeof t?t:n.innerText)},300)},w=p?(0,c.jsx)("strong",{className:m()(_().participantType,_().black),contentEditable:!0,onBlur:b,onFocus:j,onKeyDown:function(e){return N(e,"participantType")},children:e.data.participantType||a}):(0,c.jsx)("span",{className:_().participantType,contentEditable:!0,onBlur:b,onFocus:j,onKeyDown:function(e){return N(e,"participantType")},children:e.data.participantType||a}),D=(0,c.jsxs)("div",{className:m()(_().participant,(0,x.Z)({},_().isFilled,e.data.participant)),children:[a&&w,(0,c.jsx)("div",{contentEditable:!0,spellCheck:"false",className:_().input,onBlur:f,onFocus:g,onKeyDown:function(e){return N(e,"participant")},children:e.data.participant||""})]}),S=(0,c.jsx)("div",{className:_().ball,style:{background:t}});return(0,d.useEffect)(function(){a&&N(a,"participantType")},[]),(0,c.jsxs)("div",{className:_().part,children:[(0,c.jsxs)("div",{className:m()(_().label,(0,x.Z)({},_().isPresident,p)),children:[!p&&S,(0,c.jsx)("div",{className:_().inputLabel,contentEditable:!e.doNotEditLabel,onBlur:h,onFocus:v,onKeyDown:function(e){return N(e,"title")},children:e.data.title}),Boolean(e.data.time)&&(0,c.jsx)("small",{className:_().inputTime,contentEditable:!e.doNotEditLabel,onBlur:k,onFocus:y,onKeyDown:function(e){return N(e,"time")},children:e.data.time})]}),!e.doNotPray&&D]})},h=a(5682),v=a.n(h),b=function(e){var t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=(0,u.Z)({},e.data);r[t][a][n]=i,e.onWriteData(r)};return(0,c.jsxs)("div",{className:m()(v().programation,e.className),children:[(0,c.jsx)(g,{path:"weekExcerpt",data:{title:"".concat(e.data.week[0].title," | ").concat(e.data.weekExcerpt[0].title)},doNotEditLabel:!0,onWriteData:t}),(0,c.jsx)(g,{path:"songs",data:e.data.songs[0],onWriteData:t}),(0,c.jsx)(g,{path:"comments",data:e.data.comments[0],onWriteData:t}),(0,c.jsx)("div",{className:v().treasuresSection,children:"TESOUROS DA PALAVRA DE DEUS"}),e.data.treasures.map(function(e,a){return(0,c.jsx)(g,{path:"treasures",index:a,data:e,onWriteData:t},e.title)}),(0,c.jsx)("div",{className:v().ministrySection,children:"FA\xc7A SEU MELHOR NO MINIST\xc9RIO"}),e.data.ministry.map(function(e,a){return(0,c.jsx)(g,{path:"ministry",index:a,data:e,section:"ministry",onWriteData:t},e.title)}),(0,c.jsx)("div",{className:v().cristianSection,children:"NOSSA VIDA CRIST\xc3"}),(0,c.jsx)(g,{path:"songs",index:1,data:e.data.songs[1],doNotPray:!0,section:"cristianLife",onWriteData:t}),e.data.cristianLife.map(function(e,a){return(0,c.jsx)(g,{path:"cristianLife",index:a,data:e,section:"cristianLife",onWriteData:t},e.title)}),(0,c.jsx)(g,{path:"comments",index:1,data:e.data.comments[1],section:"cristianLife",onWriteData:t}),(0,c.jsx)(g,{path:"songs",index:2,data:e.data.songs[2],section:"cristianLife",onWriteData:t})]})},j=a(6719),k=a.n(j),y=a(1437),N=a.n(y),w=a(9198),D=a.n(w);a(8698);var S=function(e){var t=(0,d.useState)(new Date);t[0],t[1];var a=(0,d.useState)(!1),n=a[0],i=a[1],r=function(){i(!n)},s=function(t){e.setWeek(t),i(!1)};return(0,c.jsxs)("div",{className:N().weeksManager,children:[(0,c.jsx)("h2",{className:"sr-only",children:"Gerenciador de Semanas"}),e.loading?(0,c.jsx)("i",{className:"loading-gear-icon"}):(0,c.jsxs)(c.Fragment,{children:[e.weeks.map(function(t,a){return(0,c.jsxs)("div",{tabIndex:0,className:N().week,children:[t.week[0].title,(0,c.jsx)("button",{tabIndex:0,className:"close-icon",onClick:e.removeWeek(a),children:(0,c.jsxs)("span",{className:"sr-only",children:["Excluir Semana ",t.week[0].title]})})]},t.weekExcerpt[0].title)}),(0,c.jsx)("div",{className:N().datePicker,children:n&&(0,c.jsx)(D(),{onChange:s,minDate:new Date("01/01/2016"),maxDate:e.maxDate,inline:!0})}),(0,c.jsx)("button",{className:N().addWeek,onClick:r,children:n?"Cancelar":"Adicionar Semana"})]})]})},T=a(9396),E=a(189),L=a.n(E),P=function(e){var t,a=(t=(0,n.Z)(function(e){var t,a;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return a=(t=e.currentTarget).closest("."+L().card).querySelector("."+L().designation).innerText,[4,navigator.clipboard.writeText(a)];case 1:return n.sent(),t.classList.add(L().isCopied),setTimeout(function(){return t.classList.remove(L().isCopied)},2500),[2]}})}),function(e){return t.apply(this,arguments)}),i=(0,d.useState)([]),o=i[0],l=i[1];(0,d.useEffect)(function(){document.body.style.overflow=e.state?"hidden":"auto";var t=JSON.parse(localStorage.getItem("weeks")||"[]").flatMap(function(e){var t=e.treasures.pop();return(0,r.Z)(t.participant?[(0,T.Z)((0,u.Z)({},t),{week:e.week[0].title})]:[]).concat((0,r.Z)(e.ministry.filter(function(e){return e.participantType&&e.participant}).map(function(t){return(0,T.Z)((0,u.Z)({},t),{week:e.week[0].title})})))}),a=(0,r.Z)(new Set(t.flatMap(function(e){return e.participant.split("/").map(function(e){return e.trim()}).filter(function(e){return e})}))).map(function(e){return{to:e}});a.forEach(function(e,n){var i=t.filter(function(t){return t.participant.includes(e.to)});a[n].designations=i}),l(a)},[e.state]);var p=function(){Z("Designa\xe7\xf5es de Meio de Semana TEXT","".concat(o.map(function(e,t){return"".concat(t?"\n\n":"","Designa\xe7\xe3o para: ").concat(e.to,"\n        ").concat(e.designations.map(function(e,t){return"\nSemana: ".concat(null==e?void 0:e.week,"\nParte: ").concat(null==e?void 0:e.title,"\nDesignados: ").concat(null==e?void 0:e.participant,"\n")}).join(""))}).join("")))};return(0,c.jsxs)("div",{className:m()(L().wrapper,(0,x.Z)({},L().isVisible,e.state)),children:[(0,c.jsxs)("button",{tabIndex:0,className:L().close,onClick:function(){return e.toggleState(!e.state)},children:[(0,c.jsx)("i",{className:"close-icon"}),(0,c.jsx)("span",{className:"sr-only",children:"Fechar Designa\xe7\xf5es"})]}),o.length?(0,c.jsx)("button",{className:L().saveAs,onClick:p,children:"Salvar como TXT"}):(0,c.jsx)("div",{className:L().card,children:"Voc\xea ainda n\xe3o designou nenhum estudante da Escola"}),o.map(function(e,t){return(0,c.jsxs)("div",{className:L().card,children:[(0,c.jsxs)("div",{className:L().designation,children:["Designa\xe7\xe3o para: ",e.to,(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),e.designations.map(function(t,a){return(0,c.jsxs)(c.Fragment,{children:["Semana: ",null==t?void 0:t.week,(0,c.jsx)("br",{}),"Parte: ",null==t?void 0:t.title,(0,c.jsx)("br",{}),"Designados: ",null==t?void 0:t.participant,(0,c.jsx)("br",{}),e.designations.length>1&&e.designations.length-1!==a&&(0,c.jsx)("br",{})]})})]}),(0,c.jsxs)("button",{className:L().copy,onClick:a,children:[(0,c.jsxs)("span",{className:L().copyBefore,children:["Copiar Designa\xe7\xe3o ",(0,c.jsxs)("span",{className:"sr-only",children:["de ",e.to]})]}),(0,c.jsx)("span",{className:L().copyAfter,children:"Designa\xe7\xe3o Copiada!"})]})]},e.to)})]})},W=a(8162);function A(){return(A=(0,n.Z)(function(e){var t,a;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("api/programation-data?date=".concat(e))];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}})})).apply(this,arguments)}function C(){return(C=(0,n.Z)(function(e){var t,a,n;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("api/find-final-date")];case 1:return[4,t.sent().text()];case 2:return a=t.sent(),n={lastUpdate:new Date().toISOString(),maxWorkbookDate:new Date(a)},localStorage.setItem("maxDateLastUpdate",JSON.stringify(n)),e(n.maxWorkbookDate),[2]}})})).apply(this,arguments)}function Z(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"plain",n=document.createElement("a");n.setAttribute("href","data:text/"+a+";charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var B=function(e){var t,a="weeks",o=(0,d.useState)([]),u=o[0],p=o[1],x=(0,d.useState)(!1),f=x[0],_=x[1],g=(0,d.useState)(void 0),h=g[0],v=g[1],j=(0,d.useState)(!1),y=j[0],N=j[1];(0,d.useEffect)(function(){var e=JSON.parse(localStorage.getItem(a)||"[]");e.length&&p(e)},[]),(0,d.useEffect)(function(){var e=JSON.parse(localStorage.getItem("maxDateLastUpdate")||"{}"),t=new Date(e.lastUpdate||new Date),a=(+new Date-+t)/864e5;if(a&&a<1){v(new Date(e.maxWorkbookDate));return}!function(e){return C.apply(this,arguments)}(v)},[]);var w,D,T=(t=(0,n.Z)(function(e){var t,n;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return _(!0),[4,function(e){return A.apply(this,arguments)}(e)];case 1:return t=i.sent(),_(!1),n=(0,r.Z)(u).concat([t]),localStorage.setItem(a,JSON.stringify(n)),p(n),[2]}})}),function(e){return t.apply(this,arguments)}),E=function(e){return function(){var t=(0,r.Z)(u);t.splice(e,1),localStorage.setItem(a,JSON.stringify(t)),p(t)}},L=(0,d.useRef)(null),B=(w=(0,n.Z)(function(e){var t,a;return(0,s.__generator)(this,function(e){return t=L.current,a={overrideWidth:1e3,filename:"Escala de Meio de Semana PDF"},t.classList.add(k().toPrint),W(t,a,function(e){t.classList.remove(k().toPrint)}),[2]})}),function(e){return w.apply(this,arguments)}),I=function(){var e,t=document.createElement("div");t.innerHTML="$end",Z("Escala de Meio de Semana TXT",Array.from(L.current.childNodes).map(function(e){return(0,r.Z)(Array.from(e.childNodes)).concat([t])}).flat(2).map(function(e){return e.innerText}).map(function(e){return e.split("\n")}).map(function(e){var t=(0,i.Z)(e),a=t[0],n=t.slice(1),r=n[0]?" | ".concat(n.join(" ")):"";return"".concat(("$end"===a?"\n":"")||a).concat(r)}).join("\n"))},O=(D=(0,n.Z)(function(e){var t,n,i,c;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,e.currentTarget.files[0].text()];case 1:return n=JSON.parse(t.sent()),console.log(n),Array.isArray(n)&&(i=JSON.parse(localStorage.getItem(a)||"[]"),c=(0,r.Z)(i).concat((0,r.Z)(n)),localStorage.setItem(a,JSON.stringify(c)),console.log(c),p(c)),[2]}})}),function(e){return D.apply(this,arguments)});return(0,c.jsxs)("div",{className:k().appWrapper,children:[(0,c.jsxs)(l(),{children:[(0,c.jsx)("title",{children:"Create Next App"}),(0,c.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsx)(S,{weeks:u,setWeek:T,loading:f,removeWeek:E,maxDate:h}),(0,c.jsx)("h2",{className:"sr-only",children:"Programa\xe7\xe3o das reuni\xf5es"}),(0,c.jsx)("div",{className:k().programationWrapper,ref:L,children:u.map(function(e,t){var n;return(0,c.jsx)(b,{index:t,data:e,className:m()({bordered:t%2!=0}),onWriteData:function(e){var n=(0,r.Z)(u);n.splice(t,1,e),localStorage.setItem(a,JSON.stringify(n))}},e.date)})}),Boolean(u.length)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:k().area,children:[(0,c.jsx)("h4",{children:"\xc1rea de Download"}),(0,c.jsx)("button",{className:m()(k().saveAs,k().pdf),onClick:B,children:"Salvar como PDF"}),(0,c.jsx)("button",{className:m()(k().saveAs,k().text),onClick:I,children:"Salvar como TXT"})]}),(0,c.jsxs)("div",{className:k().area,children:[(0,c.jsx)("h4",{children:"\xc1rea de Designa\xe7\xf5es"}),(0,c.jsx)("button",{className:m()(k().saveAs,k().designation),onClick:function(){return N(!y)},children:"Ver Designa\xe7\xf5es"})]}),(0,c.jsxs)("div",{className:k().area,children:[(0,c.jsx)("h4",{children:"\xc1rea de Backup"}),(0,c.jsx)("button",{className:m()(k().saveAs,k().backup),onClick:function(){return Z("Backup Reuni\xe3o de Meio de Semana.backup",localStorage.getItem(a)||"[]")},children:"Baixar Backup"}),(0,c.jsx)("label",{htmlFor:"import-backup",className:k().backup,children:"Importar Backup"}),(0,c.jsx)("input",{type:"file",accept:".backup",name:"photo",id:"import-backup",onChange:O})]})]}),!Boolean(u.length)&&(0,c.jsxs)("div",{className:k().area,children:[(0,c.jsx)("h4",{children:"\xc1rea de Backup"}),(0,c.jsx)("label",{htmlFor:"import-backup",className:k().backup,children:"Importar Backup"}),(0,c.jsx)("input",{type:"file",accept:".backup",name:"photo",id:"import-backup",onChange:O})]}),(0,c.jsx)(P,{state:y,toggleState:N})]})}},189:function(e){e.exports={wrapper:"Designation_wrapper__OI9KG",isVisible:"Designation_isVisible__O3CzX",close:"Designation_close__YkEuV",saveAs:"Designation_saveAs__uMChv",card:"Designation_card__ATTU4",designation:"Designation_designation__NnBxr",copy:"Designation_copy__Migt0",isCopied:"Designation_isCopied__1wrEX",copyAfter:"Designation_copyAfter__XQ53a",copyBefore:"Designation_copyBefore__d3fgB"}},4699:function(e){e.exports={part:"Part_part__BJ7ns",label:"Part_label__mNrtr",isPresident:"Part_isPresident__R3EOw",isEmpty:"Part_isEmpty__qdJUB",ball:"Part_ball__0sQm4",inputLabel:"Part_inputLabel__L8QgN",inputTime:"Part_inputTime__56m3x",mb:"Part_mb__u6bdr",participant:"Part_participant__nOR8_",isFilled:"Part_isFilled__cgwhJ",participantType:"Part_participantType__mri3J",input:"Part_input__36M7k",black:"Part_black__iHfJ5"}},5682:function(e){e.exports={programation:"Programation_programation__1fjXc",title:"Programation_title__wtRB0",divisor:"Programation_divisor__LYkyp",treasuresSection:"Programation_treasuresSection__AQh9H",cristianSection:"Programation_cristianSection__Nu3TZ",ministrySection:"Programation_ministrySection__yyvvm"}},1437:function(e){e.exports={weeksManager:"WeeksManager_weeksManager__ZGlpg",week:"WeeksManager_week__yoIow",addWeek:"WeeksManager_addWeek__u9fsE",datePicker:"WeeksManager_datePicker__TKAWP"}},6719:function(e){e.exports={appWrapper:"index_appWrapper__yFSXD",programationWrapper:"index_programationWrapper__5RrKf",toPrint:"index_toPrint__ZBZw4",area:"index_area__L1icg",saveAs:"index_saveAs__7ZBd9",pdf:"index_pdf__ugic3",text:"index_text__ude7u",designation:"index_designation__wk9ZU",backup:"index_backup__ml9BV"}}},function(e){e.O(0,[847,356,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);